<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Parallel patterns</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-opaquegray { background-color: rgba(255, 255, 255, 0.0375); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="4f403e9e-5a5d-45ee-8a2b-ce36d12388db" class="page sans"><header><h1 class="page-title">Parallel patterns</h1></header><div class="page-body"><p id="4d45b4ea-8333-4e74-93e4-cb3502449d3f" class="">
</p><nav id="2672f3bf-1e56-4c1f-8320-2f9563e0ef35" class="block-color-gray table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#0b58ba8b-4806-4018-85cd-0a0fad486a4b">Data distribution</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#73e33132-db70-4d90-aee2-91e0f272240a">Loop</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#797751d6-eb84-4042-b1dc-012bde42cffd">Gather/Scatter</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#5bc8db23-50d3-4b7c-ab35-cee999fa6275">MapReduce</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#5703a9b2-9ad7-40c9-93b5-e79e71d8e22f">Stencil</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#455d3635-717e-4ba9-a9c8-eed4a66a6936">Data driven parallelization</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#05eef17d-884a-4572-88a5-5da8bd10fa61">Pipeline patten (MISD parallelism)</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#fb87c5cf-c2f6-4493-aade-99b81044551a">Master-worker (Asymmetric work-distribution)</a></div></nav><p id="2bda5a68-8f2a-4716-a1c2-5a86e9dc0487" class="">
</p><p id="9d5ebb85-a617-4a6b-a779-3c9f8706109f" class="">
</p><p id="4dbe1bd3-ed2a-4a2e-af83-9a6412c4e63e" class=""><mark class="highlight-blue">Design pattern / Programming pattern / Skeleton</mark><div class="indented"><p id="1ab75554-7d6e-488c-9f6a-1f09139c4c43" class="">General reusable solution to commonly recurring problems in software design / algorithm design.</p></div></p><p id="0af2b6ad-504b-4e20-99e9-67f29a3cd61e" class="">
</p><p id="c48a4b76-e4c5-4527-a2a0-aeb5caca2900" class=""><mark class="highlight-blue">Parallel patterns</mark><div class="indented"><p id="0caba184-9a48-4672-b514-18440a99763e" class="">Design patterns with good parallel implementations.</p><hr id="98506ddb-b7a3-43a1-ab6c-2f9dc4799ace"/><p id="18e0f455-a82b-4eaa-a177-112f7be9337a" class="">“Automatic parallelization” won’t work because the concepts in the parallel solutions are not always found in the sequential solutions.</p><p id="19fbab90-38c3-4873-8a7e-edfb2a651936" class="">Parallelization is problem and architecture dependent. There is no general strategy for parallelizing an algorithm.</p></div></p><p id="4688385b-eb2e-4c28-a272-69969038555e" class="">
</p><p id="6dc85719-8d2e-42b3-82d4-52fc885ab2f2" class=""><mark class="highlight-blue">Memory model</mark><div class="indented"><p id="8c941609-8b94-413b-af29-86114c96ebd0" class="">= When do data written by one processor become “visible” to other processors?</p><p id="b8dd6f35-cdfa-42e5-8a23-c15806f26205" class="">Different memory models for each implementation:</p><p id="dd2a96d1-9634-4a9f-b71e-60ff8d70844b" class=""><mark class="highlight-teal">Shared memory programming model</mark><div class="indented"><p id="b15d3956-c063-4e5a-9f0a-2e08e83018ea" class="">implicit and explicit synchronization</p><p id="76663f05-ef0a-4a5c-8dc4-0adc04792f37" class="">UMA vs. NUMA - memory cost model and access time</p></div></p><p id="92546d60-c797-42c9-85e4-da31c15f635a" class=""><mark class="highlight-teal">Distributed memory programming model</mark><div class="indented"><p id="b3af3d51-827c-4661-bf7c-255944d0a268" class="">Assumption: Data is distributed to processors in blocks before the processes start locally.</p><p id="e74c95df-603e-4efd-9cb2-63dde57084ea" class="">Cost of redistribution, communication, synchronization</p></div></p></div></p><p id="918173d5-6b07-4701-8014-e1330d5d45e4" class="">
</p><p id="ab4fe8af-1bfb-4e01-865d-bc335243f49a" class="">Not all problems can be parallelized.<div class="indented"><p id="95f8440f-ce41-481d-b9be-7f028d6cbbbd" class="">ie. Graph search problems (DFS, BFS, ...) are extremely difficult to parallelize:</p></div></p><p id="b04c0c21-1bdf-49cb-9c50-48f907c721a8" class="">
</p><p id="ccc9d32d-c8d2-4ecf-a593-f8a0050cab21" class=""><mark class="highlight-blue">Methodology to parallelize computations: </mark><mark class="highlight-blue"><em>“4 steps of Foster”</em></mark><div class="indented"><ol type="1" id="f7045b5a-6435-47b5-bc2e-a3cbecd2c928" class="numbered-list" start="1"><li><em>Partitioning</em><p id="25f7148b-d3cc-4b42-b100-f5bdffb3eb3f" class="">Dividing computation into independent tasks</p></li></ol><ol type="1" id="2231a5d1-499a-49e9-b254-0a31ce216fd7" class="numbered-list" start="2"><li><em>Communication</em><p id="848c3307-1a3f-451a-97cf-a3ee4d5c0143" class="">Determining communication between tasks</p></li></ol><ol type="1" id="fbcd2738-f3be-42a4-be13-f369b011f7dc" class="numbered-list" start="3"><li><em>Agglomeration/aggregation</em><p id="62f8f98b-3820-45a7-b748-320828ee54fd" class="">Combining tasks, communication to larger independent “chunks”</p></li></ol><ol type="1" id="d49faa09-96a9-4e6d-a42f-6d62c5074450" class="numbered-list" start="4"><li><em>Mapping</em><p id="643901ff-cfd7-408b-8127-04d92628c64f" class="">Assigning tasks, communication to processes, threads, ...</p></li></ol></div></p><p id="848956e4-7cb9-47f6-a5c5-5255515b1492" class="">
</p><p id="be212c51-61b3-465a-a0c3-544956d04791" class="">
</p><h1 id="0b58ba8b-4806-4018-85cd-0a0fad486a4b" class="">Data distribution</h1><p id="73f5ca73-ff5a-4c93-bae8-8eb1762172a5" class=""><mark class="highlight-blue">Data distributions (in parallel programming models)</mark><div class="indented"><p id="ff3255c6-c535-47a3-a14d-448ffa45cbb5" class="">block-wise		block <mark class="highlight-gray"><code>j</code></mark><mark class="highlight-gray"> </mark>contains elements <mark class="highlight-gray"><code>[jn/p, jn/p+1, ..., 2jnp-1]</code></mark></p><p id="d0f4b00a-5825-4041-871f-622570b13638" class="">cyclic			round-robin distribution: element <mark class="highlight-gray"><code>i</code></mark><mark class="highlight-gray"> </mark>is in block <mark class="highlight-gray"><code>i%p</code></mark></p><p id="9484fbe6-6797-4d01-a014-9f69f4107dc5" class="">block-cyclic		blocks of size <mark class="highlight-gray"><code>k</code></mark><mark class="highlight-gray"> </mark>distributed cyclically</p><p id="15c46b4a-b9fc-4f92-bf67-8bb990a65294" class="">irregular			blocks of possibly different sizes → mapping global to block index</p></div></p><p id="a1094150-2c45-45e0-8c4a-4c552c68619b" class="">
</p><p id="9a95131f-ff3c-47c8-a9ef-b98194162ec2" class=""><mark class="highlight-blue">1) Block-wise</mark><div class="indented"><p id="18849ada-d72d-46ef-850b-e6ef1cc714e0" class="">“Owner computes rule”: Block <mark class="highlight-gray"><code>j</code></mark><mark class="highlight-gray"> </mark>associated with / owened by processor <mark class="highlight-gray"><code>j</code></mark>.</p><p id="70218e4b-d63d-4a56-968b-7732e5f55ed6" class="">Possibly better performance for NUMA and distributed memory systems (spatial locality).</p></div></p><figure id="ac078040-3702-4169-bbfe-9257d201d81c" class="image"><a href="Parallel%20patterns%204f403e9e5a5d45ee8a2bce36d12388db/Untitled.png"><img style="width:288px" src="Parallel%20patterns%204f403e9e5a5d45ee8a2bce36d12388db/Untitled.png"/></a></figure><p id="8340c350-02df-4198-be87-b89290fc912c" class="">
</p><p id="08c36f0f-5376-4f7c-bf4b-f546b6dcab3c" class=""><mark class="highlight-blue">2) Cyclic</mark><div class="indented"><p id="d75d0482-b45a-4e40-8a20-68c1646f42eb" class="">Owner of element <mark class="highlight-gray"><code>i</code></mark><mark class="highlight-gray"> </mark>can be determined in <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\small O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9em;vertical-align:-0.225em;"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right:0.02778em;">O</span><span class="mopen sizing reset-size6 size5">(</span><span class="mord sizing reset-size6 size5">1</span><span class="mclose sizing reset-size6 size5">)</span></span></span></span></span><span>﻿</span></span> time and space.</p></div></p><figure id="8ef9809f-a9cc-4d28-a489-b17e034b3281" class="image"><a href="Parallel%20patterns%204f403e9e5a5d45ee8a2bce36d12388db/Untitled%201.png"><img style="width:240px" src="Parallel%20patterns%204f403e9e5a5d45ee8a2bce36d12388db/Untitled%201.png"/></a></figure><p id="a44ad04a-6d33-4809-b0b6-e7e233f54fb7" class="block-color-blue">
</p><p id="14d5bf96-aa52-43e2-92cd-147754374fe0" class=""><mark class="highlight-blue">3) Block-cyclic</mark><div class="indented"><p id="e747391f-e03f-4b47-8e6f-86d8a945c6d0" class="">Round-robin distribution of blocks of <mark class="highlight-gray"><code>k</code></mark> elements.</p><p id="b9d33657-e544-444b-880c-5ff7e3538e67" class="">Owner of element <mark class="highlight-gray"><code>i</code></mark><mark class="highlight-gray"> </mark>can be determined in <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\small O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9em;vertical-align:-0.225em;"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right:0.02778em;">O</span><span class="mopen sizing reset-size6 size5">(</span><span class="mord sizing reset-size6 size5">1</span><span class="mclose sizing reset-size6 size5">)</span></span></span></span></span><span>﻿</span></span> time and space.</p></div></p><figure id="c32b6956-7cbe-4ad2-98bc-a17794123bb5" class="image"><a href="Parallel%20patterns%204f403e9e5a5d45ee8a2bce36d12388db/Untitled%202.png"><img style="width:288px" src="Parallel%20patterns%204f403e9e5a5d45ee8a2bce36d12388db/Untitled%202.png"/></a></figure><p id="a602ccdf-8bed-4bee-882c-a952505edd03" class="">
</p><p id="915d06f5-d8c8-4dcd-a77c-5576c0d14ac3" class=""><mark class="highlight-blue">4) Irregular</mark><div class="indented"><p id="dd2a2f05-86aa-4cb5-b3ec-7354c8ad406a" class="">Owner of element <mark class="highlight-gray"><code>i</code></mark><mark class="highlight-gray"> </mark>can be determined in <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\small O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9em;vertical-align:-0.225em;"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right:0.02778em;">O</span><span class="mopen sizing reset-size6 size5">(</span><span class="mord sizing reset-size6 size5">1</span><span class="mclose sizing reset-size6 size5">)</span></span></span></span></span><span>﻿</span></span> time and space with <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\small O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9em;vertical-align:-0.225em;"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right:0.02778em;">O</span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mclose sizing reset-size6 size5">)</span></span></span></span></span><span>﻿</span></span> sized array.</p><p id="8e7cff8e-01ef-4934-bead-5ea5eef58db9" class="">Otherwise compact data structure with fast lookup needed → then no longer <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\small O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9em;vertical-align:-0.225em;"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right:0.02778em;">O</span><span class="mopen sizing reset-size6 size5">(</span><span class="mord sizing reset-size6 size5">1</span><span class="mclose sizing reset-size6 size5">)</span></span></span></span></span><span>﻿</span></span>.</p><p id="a866243c-a560-446f-b639-32482e0d1687" class="">(shown below for a single processor)</p></div></p><figure id="354903f5-0b8e-46d3-89e8-d7ff7f521e47" class="image"><a href="Parallel%20patterns%204f403e9e5a5d45ee8a2bce36d12388db/Untitled%203.png"><img style="width:96px" src="Parallel%20patterns%204f403e9e5a5d45ee8a2bce36d12388db/Untitled%203.png"/></a></figure><p id="8465b9ac-5a49-43eb-bee5-da9a81ce22ee" class="">
</p><p id="b0cfd28c-31e4-48dd-822d-aaaac5e6b862" class="">
</p><h1 id="73e33132-db70-4d90-aee2-91e0f272240a" class="">Loop</h1><p id="264cbc9e-d2b5-4eee-9ca5-0631241dd16e" class=""><mark class="highlight-blue">Loop patterns</mark><div class="indented"><p id="6b877040-363b-4ef4-bcac-64fce1a6f57c" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mtext>Tpar</mtext><mo stretchy="false">(</mo><mi>n</mi><mo separator="true">,</mo><mi>p</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mrow><mi>max</mi><mo>⁡</mo></mrow><mrow><mn>0</mn><mo>≤</mo><mi>j</mi><mo>&lt;</mo><mi>p</mi></mrow></msub><msub><mo>∑</mo><mrow><mn>0</mn><mo>≤</mo><mi>i</mi><mo>&lt;</mo><mi>n</mi><mi mathvariant="normal">/</mi><mi>p</mi></mrow></msub><mi>T</mi><mo stretchy="false">(</mo><mi>F</mi><mo stretchy="false">(</mo><mi>j</mi><mo>⋅</mo><mi>n</mi><mi mathvariant="normal">/</mi><mi>p</mi><mo>+</mo><mi>i</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\small \text{Tpar}(n,p) = \max_{0 \leq j &lt; p }\sum_{0 \leq i &lt; n/p} T(F(j \cdot n / p + i)) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9em;vertical-align:-0.225em;"></span><span class="mord text sizing reset-size6 size5"><span class="mord">Tpar</span></span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mpunct sizing reset-size6 size5">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal sizing reset-size6 size5">p</span><span class="mclose sizing reset-size6 size5">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel sizing reset-size6 size5">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.110009em;vertical-align:-0.43500900000000003em;"></span><span class="mop sizing reset-size6 size5"><span class="mop">max</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.28967999999999994em;"><span style="top:-2.45em;margin-right:0.05555555555555556em;"><span class="pstrut" style="height:2.6em;"></span><span class="sizing reset-size5 size2 mtight"><span class="mord mtight"><span class="mord mtight">0</span><span class="mrel mtight">≤</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">&lt;</span><span class="mord mathnormal mtight">p</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2796266666666667em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop sizing reset-size6 size5"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.18332333333333328em;"><span style="top:-2.283323333333333em;margin-left:0em;margin-right:0.05555555555555556em;"><span class="pstrut" style="height:2.6em;"></span><span class="sizing reset-size5 size2 mtight"><span class="mord mtight"><span class="mord mtight">0</span><span class="mrel mtight">≤</span><span class="mord mathnormal mtight">i</span><span class="mrel mtight">&lt;</span><span class="mord mathnormal mtight">n</span><span class="mord mtight">/</span><span class="mord mathnormal mtight">p</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.48334333333333335em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right:0.13889em;">T</span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right:0.13889em;">F</span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin sizing reset-size6 size5">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9em;vertical-align:-0.225em;"></span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mord sizing reset-size6 size5">/</span><span class="mord mathnormal sizing reset-size6 size5">p</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin sizing reset-size6 size5">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9em;vertical-align:-0.225em;"></span><span class="mord mathnormal sizing reset-size6 size5">i</span><span class="mclose sizing reset-size6 size5">))</span></span></span></span></span><span>﻿</span></span></p><pre id="f8f0eda5-4e13-4b5a-9f7e-6bd1f161d9aa" class="code"><code>par (0≤i&lt;n) {
	a[i] = F(i,n,…);
}</code></pre><p id="6015121d-6f8e-4518-bbcb-1334f96a2c09" class=""><mark class="highlight-teal"><em>Data parallelism / data parallel pattern</em></mark><div class="indented"><p id="d97b59a1-5d6b-4211-97f1-43cd92349010" class="">Same operation applied to multiple elements (in data structure)</p></div></p><p id="1f855252-2c96-488d-a663-45f067de15c5" class=""><mark class="highlight-teal"><em>Map</em></mark><div class="indented"><p id="a1a15939-2904-4996-9e9a-6f5b97af57aa" class="">Same operation applied to sequence.</p></div></p><p id="98409082-9ec1-4c96-9a35-984e9d92029e" class=""><mark class="highlight-teal"><em>SIMD parallelism / SIMD pattern</em></mark><div class="indented"><p id="841eeccd-7643-4733-9eb5-8f60230a1c29" class="">Single instruction (flow F) controls operation on many elements (in data structure)</p></div></p></div></p><p id="dce68c8a-81a9-481c-8340-4e36790ff061" class="">
</p><p id="72f397d8-226a-4f2a-9336-b046e28f6417" class="">
</p><h1 id="797751d6-eb84-4042-b1dc-012bde42cffd" class="">Gather/Scatter</h1><p id="1cf6fd8e-d88b-4f26-9865-7078335259da" class=""><mark class="highlight-blue">Gather/Scatter pattern</mark><div class="indented"><ol type="1" id="38f76093-d919-4f8d-81c8-693809c323be" class="numbered-list" start="1"><li><mark class="highlight-teal"><em>Gather 	</em></mark>Collect elements of data structure into consecutive compact blocks.<p id="1b011f33-a665-446c-87cb-816e23efbc25" class="">		Make input “denser” / more compact</p></li></ol><ol type="1" id="941b6bf2-1140-4577-8ad7-fe7aa8c2d6e4" class="numbered-list" start="2"><li><mark class="highlight-teal"><em>Scatter 	</em></mark>Distribute elements of consecutive compact blocks into data structure.<p id="2f7579e2-dd2b-40cc-9d5f-91de2568cb6f" class="">		Compute</p></li></ol><ol type="1" id="24871aaa-1e4c-40e0-9a67-3dd233cf8dba" class="numbered-list" start="3"><li><mark class="highlight-teal"><em>Reduce 	</em></mark>(as in MapReduce) Combine result into single block.<p id="62a69852-a553-406f-853e-ecdcc9010876" class="">		Insert result into previous input structure</p></li></ol></div></p><p id="ff375331-3615-4890-8ff2-49a0e5238a22" class="">
</p><p id="5eacae6b-6d1e-4280-975e-e343c8e25cb6" class="">
</p><h1 id="5bc8db23-50d3-4b7c-ab35-cee999fa6275" class="">MapReduce</h1><p id="c9e5ca48-1d8f-4229-b0e4-d6096a7ff0a0" class=""><mark class="highlight-blue">MapReduce pattern</mark><div class="indented"><p id="18b61e5f-a94d-45a8-9a6c-c20055155557" class="">Available data assigned to available processors</p><p id="04c3b645-0d79-4c49-9d12-da198b07371e" class="">then reduced with reduction operation (here: sum).</p><pre id="af35a6bd-e2e8-4f48-8845-b06bcc67cbba" class="code"><code>for (i=0; i&lt;n; i++) {
	a[i] = F(i,n,…);      // map
}
result = ∑ a[i];        // reduce</code></pre><ul id="1193ac7d-0080-4b6b-a0b0-442d799c6202" class="toggle"><li><details open=""><summary>Example: counting words in a document</summary><ol type="1" id="42a67fab-de06-49df-8bb2-693c62840f0e" class="numbered-list" start="1"><li>Distribute	assign text parts to processors</li></ol><ol type="1" id="41ea5f05-af26-4ee3-80d5-f90006f44146" class="numbered-list" start="2"><li>Map			each processor creates own dictionary with (word, count) pairs</li></ol><ol type="1" id="7c9711a6-5a85-4434-9316-bc810ea20c7b" class="numbered-list" start="3"><li>Map			each processors sorts dictionary lexicographically after words</li></ol><ol type="1" id="4c1cc169-d9b4-450a-adcd-f2bbedf9aae0" class="numbered-list" start="4"><li>Reduce		all dictionaries are merged, for each word, all counts added</li></ol><p id="c0e0b57a-459b-4d2a-9b91-9f6fd0f31b7f" class="">(requires load balancing)</p></details></li></ul></div></p><p id="1c5cff2c-9f62-4081-ab59-90b496114c3f" class="">
</p><p id="4531b64e-0943-4ab4-a496-1a75ef8eb91d" class="">
</p><h1 id="5703a9b2-9ad7-40c9-93b5-e79e71d8e22f" class="">Stencil</h1><p id="3eecdf83-46b2-461b-8765-ce371f6d2c3a" class=""><mark class="highlight-blue">Stencil pattern (one dimensional)</mark><div class="indented"><p id="810900b1-1091-479e-95e6-18d6fe85a78c" class=""><em>Goal: Iterating through array</em></p><p id="d687d9f1-d439-455a-a3c3-4f50ae5468e4" class="">Sequential: not data parallel, dependent iterations<div class="indented"><pre id="7e43da28-2093-4a03-a87c-1f550198b664" class="code"><code>for (i=0; i&lt;n; i++) {
	a[i] = a[i-1] + a[i] + a[i+1];
}</code></pre></div></p><p id="1f03a556-ad85-4713-ad2b-9bdb3dc03a16" class="">Parallel: Removing dependencies with extra space<div class="indented"><pre id="5dde2920-daec-4f16-8d63-8653a3ee79c9" class="code"><code>for (i=n[j]; i&lt;n[j+1]; i++) {
	tmp[i] =a[i-1]+a[i]+a[i+1];
}
barrier;
x = tmp; tmp = a; a = x; // swap (more efficient than copying)</code></pre><p id="dbab5b69-570a-4a84-ac09-1c5fb01496de" class="">Synchronization: Processor <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>j</mi></mstyle></mrow><annotation encoding="application/x-tex">\small j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.768564em;vertical-align:-0.174996em;"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right:0.05724em;">j</span></span></span></span></span><span>﻿</span></span> needs access to <mark class="highlight-gray"><code>a[n[j]-1]</code></mark> and <mark class="highlight-gray"><code>a[n[j+1]]</code></mark> before they are updated by processors <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>j</mi><mo>−</mo><mn>1</mn></mstyle></mrow><annotation encoding="application/x-tex">\small j-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.768564em;vertical-align:-0.174996em;"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin sizing reset-size6 size5">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.5799960000000001em;vertical-align:0em;"></span><span class="mord sizing reset-size6 size5">1</span></span></span></span></span><span>﻿</span></span> and <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>j</mi><mo>+</mo><mn>1</mn></mstyle></mrow><annotation encoding="application/x-tex">\small j+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.768564em;vertical-align:-0.174996em;"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin sizing reset-size6 size5">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.5799960000000001em;vertical-align:0em;"></span><span class="mord sizing reset-size6 size5">1</span></span></span></span></span><span>﻿</span></span>.</p></div></p></div></p><p id="21c2daec-13f8-4668-9706-b5fa4fe03083" class="">
</p><p id="9de39bb8-c7fc-4902-a739-10ae55cc3fb4" class=""><mark class="highlight-blue">General stencil pattern</mark><div class="indented"><p id="2db6073d-920c-42b7-bddf-930e0e8ddf5e" class=""><em>Given:</em><div class="indented"><ul id="b645034c-9d03-49d6-affa-1b7b008cff33" class="bulleted-list"><li style="list-style-type:disc">data structure <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>A</mi></mstyle></mrow><annotation encoding="application/x-tex">\small A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.614997em;vertical-align:0em;"></span><span class="mord mathnormal sizing reset-size6 size5">A</span></span></span></span></span><span>﻿</span></span><p id="bed046b5-c0ce-4972-bbda-8f55280c1109" class=""><mark class="highlight-gray">ie. 2D matrix</mark></p></li></ul><ul id="70025af7-e8b2-42f8-82c1-75e771f60e6e" class="bulleted-list"><li style="list-style-type:disc">update rule <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>P</mi><mo stretchy="false">(</mo><mi>A</mi><mo separator="true">,</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo separator="true">,</mo><mo>…</mo><mtext> </mtext><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\small P(A, i, j , \dots)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9em;vertical-align:-0.225em;"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right:0.13889em;">P</span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">A</span><span class="mpunct sizing reset-size6 size5">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal sizing reset-size6 size5">i</span><span class="mpunct sizing reset-size6 size5">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right:0.05724em;">j</span><span class="mpunct sizing reset-size6 size5">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner sizing reset-size6 size5">…</span><span class="mspace sizing reset-size6 size5" style="margin-right:0.16666666666666666em;"></span><span class="mclose sizing reset-size6 size5">)</span></span></span></span></span><span>﻿</span></span><p id="d81d62e3-7f3b-4025-a03b-72522ece2123" class=""><mark class="highlight-gray">ie. local neighborhood, template, stencil</mark></p><p id="9feb4794-e901-4e50-805a-069d1a609daa" class="">mostly <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\small O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9em;vertical-align:-0.225em;"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right:0.02778em;">O</span><span class="mopen sizing reset-size6 size5">(</span><span class="mord sizing reset-size6 size5">1</span><span class="mclose sizing reset-size6 size5">)</span></span></span></span></span><span>﻿</span></span> → total work for update <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>O</mi><mo stretchy="false">(</mo><mi>s</mi><mi>i</mi><mi>z</mi><mi>e</mi><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\small O(size(A))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9em;vertical-align:-0.225em;"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right:0.02778em;">O</span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">s</span><span class="mord mathnormal sizing reset-size6 size5">i</span><span class="mord mathnormal sizing reset-size6 size5">ze</span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">A</span><span class="mclose sizing reset-size6 size5">))</span></span></span></span></span><span>﻿</span></span></p><p id="84ddc397-e150-420c-b657-e88cff0abaed" class="">must have specification for borders</p></li></ul></div></p><p id="142b006c-6f46-44d9-8e04-f532b661a6ca" class=""><em>Pattern:</em><div class="indented"><p id="bed99866-474c-437c-8380-28c74f542467" class="">Update all elements using update rule.</p><p id="989ed8a8-dfe8-48c3-b4bf-91d4e8238d6f" class="">Apply <em>stencil </em>on all elements <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>A</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo separator="true">,</mo><mo>…</mo><mtext> </mtext><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\small A(i,j, \dots)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9em;vertical-align:-0.225em;"></span><span class="mord mathnormal sizing reset-size6 size5">A</span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">i</span><span class="mpunct sizing reset-size6 size5">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right:0.05724em;">j</span><span class="mpunct sizing reset-size6 size5">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner sizing reset-size6 size5">…</span><span class="mspace sizing reset-size6 size5" style="margin-right:0.16666666666666666em;"></span><span class="mclose sizing reset-size6 size5">)</span></span></span></span></span><span>﻿</span></span>.</p></div></p></div></p><p id="10d36069-e15e-4979-8d1c-e4269a05593b" class="">
</p><p id="80ba0ca1-ccd7-4b9e-8942-2833ccdc6c85" class=""><mark class="highlight-blue">Stencil pattern parellelization through domain decomposition</mark><div class="indented"><p id="0d97a09a-c99a-40be-95ca-8acf43e6a67c" class="">Domain decomposition:<div class="indented"><p id="f0188cee-ef84-4714-aa1d-2614da6c1c3e" class="">Dividing <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>A</mi></mstyle></mrow><annotation encoding="application/x-tex">\small A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.614997em;vertical-align:0em;"></span><span class="mord mathnormal sizing reset-size6 size5">A</span></span></span></span></span><span>﻿</span></span> evenly over available processors</p><p id="632e738e-9f73-44b1-84af-538c660069e3" class="">each responsible for updates on its subdomains.</p><p id="c04b68b6-84b5-4d5c-86dc-4bda53fb0e5e" class="">Can be shared or distributed memory.</p></div></p><p id="e6c26c95-2db3-467b-bba5-4a77bb920c40" class="">Issues:<div class="indented"><p id="fe91c4cf-e3bf-4b16-9e39-4b48d6998c69" class="">Borders of subdomains: writing into the subdomain of other processor.<div class="indented"><p id="88b47b9d-491d-4999-9d7d-7afa408b3794" class="">communication / synchronization with neighboring processors needed</p></div></p><p id="4c1ba18e-8a79-4115-807a-392c0ecfd9ca" class="">Keeping updates synchronized.</p><p id="897f35ab-bc39-42a1-8a1b-2fef408bde32" class="">Load balancing.</p></div></p></div></p><p id="dfc38237-c713-49ee-b4f7-980bdac86715" class="">
</p><p id="2b7b97ee-8b8d-4a67-b3ba-76f79a99f166" class="">
</p><h1 id="455d3635-717e-4ba9-a9c8-eed4a66a6936" class="">Data driven parallelization</h1><p id="1700e97d-8b1c-4edc-b7d9-ad93809691da" class=""><mark class="highlight-blue">Data distribution</mark><div class="indented"><p id="27d796ad-4a30-4552-a71d-b23ede1b8ad6" class="">Data distribution decides how we parallelize: “perform computations where the data is”</p><p id="d53555db-8456-45f2-94dc-67ace65c0933" class="">Assumptions: locality matters because of NUMA model</p></div></p><p id="8a05cfeb-c39e-4de1-9a62-a40a93fc5ab5" class="">
</p><p id="9a606b61-e84a-4ef6-a5e3-6408e0748c3b" class=""><mark class="highlight-blue">Paritioned Global Address Space PGAS</mark><div class="indented"><ol type="1" id="a0847cb9-85bc-4d0f-b5be-fb5de8f17223" class="numbered-list" start="1"><li>Divide date structures across processors (based on some distribution)</li></ol><ol type="1" id="c01fdc4a-b61c-45c9-9272-9e248ecfa44c" class="numbered-list" start="2"><li>“Owner computes”-rule</li></ol><ol type="1" id="57fdd6b5-0c07-462a-aee0-60e0823ee25e" class="numbered-list" start="3"><li>If processor accesses data owned by other processor: (implicit) communication. </li></ol><hr id="9f380a31-0077-4b2f-be3f-f73f929bc78a"/><p id="43b93508-26c1-480e-831b-43c5f7fdaa95" class="">Needs efficient ownership.<div class="indented"><p id="0776448c-969a-43a1-8d3d-c51d4495a4bc" class=""><em>Example: Owner computes, compiler translates loops</em></p><pre id="926f2cd7-3555-4c8f-904c-6078bbfff92b" class="code"><code>for (i=n[j]; i&lt;n[j+1]; i++) {
	a[i] = f(i);
}</code></pre><pre id="65ab8f21-ecc9-48fd-add4-73a6759f6d21" class="code"><code>for (i=0; i&lt;n; i++) {
	if (owns(i,j)) a[i] = f(i);
}</code></pre></div></p><p id="ebc5b0f5-7c18-4b2b-adfe-b987fb7d172c" class="">
</p><p id="a180eed6-d6bc-4fb0-9873-5ff85bf10eea" class="">
</p></div></p><h1 id="05eef17d-884a-4572-88a5-5da8bd10fa61" class="">Pipeline patten (MISD parallelism)</h1><p id="6040d8a3-495a-4db6-b857-29dec4fd3b5c" class=""><mark class="highlight-blue">Linear pipeline (can be complex DAG)</mark><div class="indented"><p id="5bff38b7-a9d5-4bfb-9e86-302476cd2097" class="">Pipeline latency		after <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>k</mi><mo>−</mo><mn>1</mn></mstyle></mrow><annotation encoding="application/x-tex">\small k-1 </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.699993em;vertical-align:-0.07499700000000001em;"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin sizing reset-size6 size5">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.5799960000000001em;vertical-align:0em;"></span><span class="mord sizing reset-size6 size5">1</span></span></span></span></span><span>﻿</span></span> steps a first output is produced</p><p id="957bdc89-25c1-44b6-a29e-da358d512801" class="">Pipeline throughput	in each step, a new output block is produced - each step takes <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><msub><mi>F</mi><mi>j</mi></msub><mo stretchy="false">(</mo><msub><mi>w</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\small F_j(w_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9266640000000002em;vertical-align:-0.25166400000000005em;"></span><span class="mord sizing reset-size6 size5"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.28967999999999994em;"><span style="top:-2.45em;margin-left:-0.13889em;margin-right:0.05555555555555556em;"><span class="pstrut" style="height:2.6em;"></span><span class="sizing reset-size5 size2 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2796266666666667em;"><span></span></span></span></span></span></span><span class="mopen sizing reset-size6 size5">(</span><span class="mord sizing reset-size6 size5"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.28967999999999994em;"><span style="top:-2.45em;margin-left:-0.02691em;margin-right:0.05555555555555556em;"><span class="pstrut" style="height:2.6em;"></span><span class="sizing reset-size5 size2 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose sizing reset-size6 size5">)</span></span></span></span></span><span>﻿</span></span></p></div></p><figure id="545374ba-e762-44e1-9926-8f1cdd4ea8c0" class="image"><a href="Parallel%20patterns%204f403e9e5a5d45ee8a2bce36d12388db/Untitled%204.png"><img style="width:336px" src="Parallel%20patterns%204f403e9e5a5d45ee8a2bce36d12388db/Untitled%204.png"/></a></figure><p id="acd6f843-4606-4395-9b27-efe042faf90a" class="">
</p><p id="28566b2e-2671-42cd-a19a-5e6bf9b733f6" class="">
</p><h1 id="fb87c5cf-c2f6-4493-aade-99b81044551a" class="">Master-worker (Asymmetric work-distribution)</h1><p id="d2e58b3d-0c83-4bcb-a9c1-2e406fae5cdc" class=""><mark class="highlight-blue">Master-worker</mark><div class="indented"><p id="2cd3fd42-20f6-4efa-922f-e5061122cf21" class="">Worker		processor <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><msub><mi>p</mi><mi>i</mi></msub></mstyle></mrow><annotation encoding="application/x-tex">\small p_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5625em;vertical-align:-0.174996em;"></span><span class="mord sizing reset-size6 size5"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.28967999999999994em;"><span style="top:-2.45em;margin-left:0em;margin-right:0.05555555555555556em;"><span class="pstrut" style="height:2.6em;"></span><span class="sizing reset-size5 size2 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> requests work from master <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><msub><mi>p</mi><mn>0</mn></msub></mstyle></mrow><annotation encoding="application/x-tex">\small p_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5625em;vertical-align:-0.174996em;"></span><span class="mord sizing reset-size6 size5"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2796266666666667em;"><span style="top:-2.45em;margin-left:0em;margin-right:0.05555555555555556em;"><span class="pstrut" style="height:2.6em;"></span><span class="sizing reset-size5 size2 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> - returns solution</p><hr id="015bb4e1-af1a-44ba-b760-701c076a6f53"/><p id="68433d63-84eb-4ac5-9ab7-f404e8384f4e" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mspace width="1em"/></mrow><annotation encoding="application/x-tex">+ \quad </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">+</span><span class="mspace" style="margin-right:1em;"></span></span></span></span></span><span>﻿</span></span>Pattern can potentially keep all <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>p</mi></mstyle></mrow><annotation encoding="application/x-tex">\small p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5625em;vertical-align:-0.174996em;"></span><span class="mord mathnormal sizing reset-size6 size5">p</span></span></span></span></span><span>﻿</span></span> processors busy: <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><msub><mi>S</mi><mi>p</mi></msub><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">Θ</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\small S_p(n) = \Theta(p)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9266640000000002em;vertical-align:-0.25166400000000005em;"></span><span class="mord sizing reset-size6 size5"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.13703999999999994em;"><span style="top:-2.45em;margin-left:-0.05764em;margin-right:0.05555555555555556em;"><span class="pstrut" style="height:2.6em;"></span><span class="sizing reset-size5 size2 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2796266666666667em;"><span></span></span></span></span></span></span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mclose sizing reset-size6 size5">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel sizing reset-size6 size5">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.9em;vertical-align:-0.225em;"></span><span class="mord sizing reset-size6 size5">Θ</span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">p</span><span class="mclose sizing reset-size6 size5">)</span></span></span></span></span><span>﻿</span></span>.</p><p id="d5a16569-187d-48db-be79-b4577b0111be" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mspace width="1em"/></mrow><annotation encoding="application/x-tex">+ \quad </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">+</span><span class="mspace" style="margin-right:1em;"></span></span></span></span></span><span>﻿</span></span>Good if in subproblems work/size ratio is high and workers can compute asynchronously.</p><p id="e97701d9-2efd-4cba-9f00-d3fbc3fdc4a0" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mspace width="1em"/></mrow><annotation encoding="application/x-tex">+ \quad </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">+</span><span class="mspace" style="margin-right:1em;"></span></span></span></span></span><span>﻿</span></span>Master solves “Termination detection problem”: no more subproblems → terminate.</p><p id="669b0d38-f15e-4310-b36b-2909b4c5525c" class=""><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mspace width="1em"/></mrow><annotation encoding="application/x-tex">- \quad </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mspace" style="margin-right:1em;"></span></span></span></span></span><span>﻿</span></span>Master can be sequential bottleneck.</p></div></p><figure id="2798f432-fea5-4bec-962a-ef085c7457d6" class="image"><a href="Parallel%20patterns%204f403e9e5a5d45ee8a2bce36d12388db/Untitled%205.png"><img style="width:336px" src="Parallel%20patterns%204f403e9e5a5d45ee8a2bce36d12388db/Untitled%205.png"/></a></figure><p id="a63fbfb2-d12d-44e0-bbc9-ae5a3794cac4" class="">
</p><p id="0cc1dd57-7c8f-4531-8391-a3ae30710696" class=""><mark class="highlight-blue">Load balancing: Master-worker variation</mark><div class="indented"><p id="4c1780a8-7d66-49e1-8d37-00c9f4eeec94" class="">Work-pool is distributed and workers have local pools.</p><p id="8027812e-d217-4b55-acd7-bad784a385e8" class="">Communication between workers allowed:<div class="indented"><ul id="1e443202-a00d-4f98-8419-aabcb6c44432" class="bulleted-list"><li style="list-style-type:disc">work-dealing		overfull pools initiate redistribution</li></ul><ul id="fba8ce1c-9ed6-4fec-a069-31ed9519f7c7" class="bulleted-list"><li style="list-style-type:disc">work-stealing		processors with empty work-pool steal/request from others</li></ul></div></p><p id="1d22c467-8890-49d7-bf7e-07bb48f985fe" class="">Problem: Termination detection gets difficult.</p></div></p><figure id="eafa2674-2cbc-41cd-a3d1-57c1f3072a3c" class="image"><a href="Parallel%20patterns%204f403e9e5a5d45ee8a2bce36d12388db/Untitled%206.png"><img style="width:432px" src="Parallel%20patterns%204f403e9e5a5d45ee8a2bce36d12388db/Untitled%206.png"/></a></figure></div></article></body></html>