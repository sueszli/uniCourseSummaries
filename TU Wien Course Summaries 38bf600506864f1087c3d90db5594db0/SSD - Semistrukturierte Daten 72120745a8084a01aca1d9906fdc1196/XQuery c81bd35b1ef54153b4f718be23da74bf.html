<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>XQuery</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-opaquegray { background-color: rgba(255, 255, 255, 0.0375); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="c81bd35b-1ef5-4153-b4f7-18be23da74bf" class="page sans"><header><h1 class="page-title">XQuery</h1></header><div class="page-body"><p id="c33d7ee1-0e19-4723-875d-9ee26ac737be" class="">
</p><nav id="aabb6ac9-9ec2-4845-98b7-b2e451adaa6f" class="block-color-gray table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#66aaeea7-fc44-42c4-9a36-f7fac4714bc1">Definition</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#68fd6cd9-b2e7-4593-adcb-2085821a87b9">FLWOR Expressions</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#6996ed09-bb66-4007-9be4-3b227fae6b62">Other Features</a></div></nav><p id="031c6317-681f-4849-8d59-739dd5a79efb" class="">
</p><h1 id="66aaeea7-fc44-42c4-9a36-f7fac4714bc1" class="">Definition</h1><p id="14254c42-265e-4985-a8a9-27a7cf04c102" class=""><mark class="highlight-blue">XQuery</mark><div class="indented"><p id="bfe83803-5de2-48a9-8920-1e9f00385d6a" class="">XPath <style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.2/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⊂</mo></mrow><annotation encoding="application/x-tex">\subset</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">⊂</span></span></span></span></span><span>﻿</span></span> XQuery</p><p id="20db2222-5667-461f-a0ec-5bcff3258405" class="">language for querying XML (and sorting and structuring query results)</p></div></p><p id="6aeb58b0-7c4a-41c3-89d0-5cd9b5aec866" class=""><mark class="highlight-blue">XQuery Processor</mark><div class="indented"><p id="4fbd7798-d479-4b80-a8ff-a197eb9ca309" class="">parsing		getting semantics of text</p><p id="987b88c9-ea43-46f6-b6ab-70dc3041a7db" class="">analyzing		static errors: searching syntax (independent of document), ...</p><p id="55b869f6-4094-4ebb-8bc6-062a59bb3c69" class="">evaluation	dynamic errors: missing input document, division by zero, ...</p></div></p><figure id="578deaae-04e4-4d6a-8de0-026e9ee0f3e0" class="image"><a href="XQuery%20c81bd35b1ef54153b4f718be23da74bf/Untitled.png"><img style="width:192px" src="XQuery%20c81bd35b1ef54153b4f718be23da74bf/Untitled.png"/></a></figure><ul id="dd673052-d845-4c58-a706-93c054d01db0" class="toggle"><li><details open=""><summary>Examples of usage</summary><pre id="82b4d3f2-2056-4b9e-848d-f076851bb556" class="code"><code>&lt;courses&gt;
	&lt;course semester=&quot;Summer&quot;&gt;
		&lt;title&gt; SSD &lt;/title&gt;
		&lt;day&gt; Thursday &lt;/day&gt;
		&lt;time&gt; 09:15 &lt;/time&gt;
		&lt;location&gt; HS8 &lt;/location&gt;
	&lt;/course&gt;
	&lt;course semester=&quot;Winter&quot;&gt;
		&lt;title&gt; Databases &lt;/title&gt;
		&lt;day&gt; Tuesday &lt;/day&gt;
		&lt;time&gt; 09:15 &lt;/time&gt;
		&lt;location&gt; HS8 &lt;/location&gt;
	&lt;/course&gt;
&lt;/courses&gt;</code></pre><p id="86b62c57-3a13-425a-9848-4f99cb939ecc" class="">Query: <mark class="highlight-gray"><code>doc(&quot;courses.xml&quot;)/courses/course/title</code></mark><div class="indented"><p id="3769dd43-b2c6-4d0c-9f27-e194e36a33ab" class=""><mark class="highlight-gray"><code>&lt;title&gt; Semi-structured Data &lt;/title&gt;
&lt;title&gt; Databases &lt;/title&gt;</code></mark></p></div></p><hr id="f6fd1ad9-335b-490d-841f-8d15fc6b3aeb"/><p id="ac3cebd6-af29-4c9f-ab85-53abe62883fc" class="">Query: <mark class="highlight-gray"><code>doc(&quot;courses.xml&quot;)/courses/course[@semester=&quot;Winter&quot;]/title</code></mark></p><p id="cd480ceb-acbd-43b0-8111-44d31e4471f9" class="">Query: <mark class="highlight-gray"><code>for $x in doc(&quot;courses.xml&quot;)/courses/course</code></mark><div class="indented"><p id="31b19518-d63f-4367-9853-219d52de6eed" class="">	<mark class="highlight-gray"><code>where $x/@semester=&quot;Winter&quot;</code></mark></p><p id="b7341da0-0243-4034-8012-a7e721fee6b0" class="">	<mark class="highlight-gray"><code>return $x/title</code></mark></p><p id="3b6119f1-8f74-4a4c-aa75-869b00ccfbda" class=""><mark class="highlight-gray"><code>&lt;title&gt; Databases &lt;/title&gt;</code></mark></p></div></p><hr id="ee83237a-3842-4040-ba34-3dd01865e8a8"/><p id="e950c34d-5cd6-4511-8624-aafb88019727" class="">Query: <code><mark class="highlight-gray">for $x in doc(&quot;courses.xml&quot;)/courses/course</mark></code><div class="indented"><p id="c4771e4f-b49f-4695-9b03-88b68d855d30" class="">	<code><mark class="highlight-gray">where $x/@semester=&quot;Winter&quot;</mark></code></p><p id="f3184571-de69-4e99-b58e-9d3066a036cf" class="">	<code><mark class="highlight-gray">order by $x/title descending</mark></code></p><p id="0ce74d06-41f8-48ab-9cab-4043dcd91142" class="">	<code><mark class="highlight-gray">return $x/title</mark></code></p><p id="595a43b2-cbfc-4b47-aa1d-ff074fb6bd54" class=""><mark class="highlight-gray"><code>&lt;title&gt; SSD &lt;/title&gt;
&lt;title&gt; Databases &lt;/title&gt;</code></mark></p></div></p></details></li></ul><p id="738f82cf-898a-4d98-8f91-21263e0a0608" class="">
</p><p id="3a29197f-ae8a-4768-8f2d-10765f660a23" class="">
</p><h1 id="68fd6cd9-b2e7-4593-adcb-2085821a87b9" class="">FLWOR Expressions</h1><p id="cc61795f-f315-4395-a3db-375c889cb284" class=""><mark class="highlight-blue">FLWOR</mark><div class="indented"><p id="281d383b-8542-4699-ae30-496df722810e" class="">pronounced: “flower expressions”</p><p id="24a7f963-d178-471b-ad55-c5cd75f82369" class="">generalized version of <mark class="highlight-gray"><code>select from having where</code></mark><mark class="highlight-gray"> </mark>in SQL<div class="indented"><p id="a8f5263a-82ab-4b03-bf38-fda869f391ce" class="">F 	<mark class="highlight-gray"><code>for</code></mark></p><p id="ac28a1d8-9eba-4f5d-91b7-ab18bbc8f5ff" class="">L 	<mark class="highlight-gray"><code>let</code></mark></p><p id="b15e1418-62cb-4cc2-93f8-fbce3ea4b463" class="">W 	<mark class="highlight-gray"><code>where</code></mark></p><p id="decfd4c3-add3-40e9-8325-fc58551ac773" class="">O 	<mark class="highlight-gray"><code>order by</code></mark></p><p id="29df4a49-e856-476b-b0e9-6317eb2af6aa" class="">R 	<mark class="highlight-gray"><code>return</code></mark></p></div></p><hr id="3810da5e-1c56-400e-aaca-1dc8ac4d464e"/><ul id="d5f44744-4228-4c77-b4c9-0fe29d75ea45" class="toggle"><li><details open=""><summary>Example of FLWOR</summary><pre id="e4b5b892-11fe-4346-b94f-79a53d1d0537" class="code"><code>for $d in doc(&quot;departments.xml&quot;)//dept_no
let $e := doc(&quot;employees.xml&quot;)//employee[dept_no = $d]
where count($e) &gt;= 10
order by avg($e/salary) descending
return
	&lt;large_dept&gt;
		{$d}
		&lt;size&gt; {count($e)} &lt;/size&gt;
		&lt;avg_salary&gt; {avg($e/salary)} &lt;/avg_salary&gt;
	&lt;/large_dept&gt;</code></pre><ul id="4aa50aaf-b63c-4d52-a078-4edfc4e611cc" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-gray"><code>for</code></mark> generates bindings of <mark class="highlight-gray"><code>dept_no</code></mark> values to <mark class="highlight-gray"><code>$d</code></mark></li></ul><ul id="1b6e6bdf-8968-4826-ad1d-302983496813" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-gray"><code>let</code></mark> generates another binding to <mark class="highlight-gray"><code>$e</code></mark>: employees with <code><mark class="highlight-gray">dept_no</mark></code> as <mark class="highlight-gray"><code>$d</code></mark><p id="f1f07225-e4d6-4a1d-b71e-06598f9a1c3e" class=""><em>→ </em><em><mark class="highlight-gray"><code>for</code></mark></em><em> and </em><em><mark class="highlight-gray"><code>let</code></mark></em><em><mark class="highlight-gray"> </mark></em><em>can be used multiple times</em></p></li></ul><ul id="09f497e5-3120-4e92-afd7-48219e2865c1" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-gray"><code>where</code></mark> filters that list to keep only the desired pairs (at least 10 employees)</li></ul><ul id="23adb437-7aef-4a52-bf30-a769b5ef3171" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-gray"><code>order by</code></mark> sorts that lists by the given criteria (sorted desceding by average salary)</li></ul><ul id="dac6a081-a5e3-4ea1-bb54-d674a11f2da9" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-gray"><code>return</code></mark> constructs for each pair a resulting value</li></ul></details></li></ul></div></p><p id="b8917f43-ef77-484f-9537-a0eed63000f7" class="">
</p><p id="893162f2-6dbb-42ac-968e-87bc5ab24244" class=""><mark class="highlight-blue">Element Constructors</mark><div class="indented"><p id="67dadae1-6a85-49ae-b5ad-30ce2672340a" class="">One can create new elements and add them in the result, by wrapping query into elements.</p><ul id="27fd6480-fd34-43b8-b7ba-2e242612e9c5" class="toggle"><li><details open=""><summary>Example of Element Constructor</summary><p id="d378e824-c8bd-4f03-822b-eb573ca30d1d" class="">Here we create an element and attribute.</p><pre id="6db11d02-c341-4591-ab42-60d6d45ea66c" class="code"><code>&lt;sorted_departments&gt; {
	for $d in doc(&quot;departments.xml&quot;)//dept_no
	let $e := doc(&quot;employees.xml&quot;)//employee[dept_no = $d]
	where count($e) &gt;= 10
	order by avg($e/salary) descending
	return
		&lt;large_dept name = &quot;{$d}&quot;&gt;
			{$d}
			&lt;size&gt; {count($e)} &lt;/size&gt;
			&lt;avg_salary&gt; {avg($e/salary)} &lt;/avg_salary&gt;
		&lt;/large_dept&gt;
} &lt;/sorted_departments&gt;</code></pre></details></li></ul></div></p><p id="5f271fcf-26d7-43e8-9a72-123ccb270d52" class="">
</p><p id="ab045d09-a324-4816-8c38-94b8f1fb1245" class="">
</p><h1 id="6996ed09-bb66-4007-9be4-3b227fae6b62" class="">Other Features</h1><p id="4d3661ac-a6a7-4136-aa22-c4a7ba5970f3" class=""><mark class="highlight-blue">List</mark><div class="indented"><p id="c18fc0a0-5e21-4bdb-99d1-132233b09219" class="">XQuery expressions manupulate lists of items.<div class="indented"><p id="882d4d50-36e0-4690-a185-bf24fb2515a0" class="">operators	<mark class="highlight-gray"><code>&quot;3 to 10&quot;</code></mark><mark class="highlight-gray">, </mark><mark class="highlight-gray"><code>union</code></mark><mark class="highlight-gray">, </mark><mark class="highlight-gray"><code>intersect</code></mark><mark class="highlight-gray">, </mark><mark class="highlight-gray"><code>except</code></mark><mark class="highlight-gray">, </mark><mark class="highlight-gray"><code>concatenation with &quot;,&quot;</code></mark></p><p id="64394bc6-df39-4409-ab69-869c26ab2ae6" class="">functions		<mark class="highlight-gray"><code>count</code></mark><mark class="highlight-gray">, </mark><mark class="highlight-gray"><code>avg</code></mark><mark class="highlight-gray">, </mark><mark class="highlight-gray"><code>max</code></mark><mark class="highlight-gray">, </mark><mark class="highlight-gray"><code>min</code></mark><mark class="highlight-gray">, </mark><mark class="highlight-gray"><code>sum</code></mark><mark class="highlight-gray">, </mark><mark class="highlight-gray"><code>distinct-values</code></mark><mark class="highlight-gray">, …</mark></p></div></p></div></p><p id="539c287c-025e-47c1-8ebb-0a2d2b36434f" class=""><mark class="highlight-blue">Conditional</mark><div class="indented"><p id="1d04779f-19b1-420d-8acd-e6e873bcb6b2" class=""><mark class="highlight-gray"><code>if-then-else</code></mark> expressions</p><p id="1068cb22-c807-44f1-9431-a696b9cc5ff5" class="">(<mark class="highlight-gray"><code>else</code></mark> is required but can be left empty with <mark class="highlight-gray"><code>()</code></mark>)</p></div></p><p id="464edea8-0beb-49e8-a6fd-9f3a55181720" class=""><mark class="highlight-blue">Quantified Expressions</mark><div class="indented"><p id="1e4d96fb-4ce4-4ed1-a98c-0c2e5e38b6eb" class="">exists, forall expressed with<div class="indented"><p id="dac90250-c9fa-4128-96d7-cdb4997b9666" class=""><mark class="highlight-gray"><code>some ...  in ... satisfies</code></mark></p><p id="cb0a2cc4-f0bf-4463-a649-6f52771b6e99" class=""><mark class="highlight-gray"><code>every ...  in ... satisfies</code></mark></p></div></p></div></p><p id="477c9cb7-29bc-4b09-875f-a9ef67d03efe" class="">
</p></div></article></body></html>